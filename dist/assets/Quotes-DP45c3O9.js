import{c as _,u as j,j as e,m as l,C as S,e as T,r as o,s as A,b as f,A as Q}from"./index-BsN2_pnW.js";import{A as R}from"./AccountLayout-77iqBrxW.js";import{L as M}from"./LazyImage-C9DSb03t.js";import{D as F}from"./dollar-sign-9btXrtQu.js";import{A as H}from"./arrow-right-CJwG2D7Q.js";import{T as I}from"./tag-CzsaR-j2.js";import{C as E}from"./clock-DGqH9gDW.js";import{S as z}from"./search-DKfhDlon.js";import{F as B}from"./filter-TYt9X5lP.js";import"./log-out-0NWe_3k6.js";import"./package-JmuUYXCi.js";import"./file-text-BzJD3yu5.js";import"./settings-DmN2sqhH.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=_("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),$=({quote:t})=>{const i=j(),m=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),x=()=>{switch(t.status){case"pending":return e.jsxs("div",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium flex items-center",children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),"Pending"]});case"quoted":return e.jsxs("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium flex items-center",children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),"Quote Ready"]});case"accepted":return e.jsxs("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium flex items-center",children:[e.jsx(h,{className:"w-3 h-3 mr-1"}),"Accepted"]});case"declined":return e.jsxs("div",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium flex items-center",children:[e.jsx(u,{className:"w-3 h-3 mr-1"}),"Declined"]});default:return null}},h=({className:a})=>e.jsx("svg",{className:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),u=({className:a})=>e.jsx("svg",{className:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M15 9L9 15M9 9L15 15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});return e.jsxs(l.div,{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100 hover:shadow-lg transition-all duration-200",whileHover:{y:-4},onClick:()=>i(`/quotes/${t.id}`),children:[e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:t.item_name}),x()]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[e.jsx(S,{className:"w-4 h-4 mr-1.5"}),e.jsx("span",{children:m(t.created_at)}),t.urgency==="express"&&e.jsx("span",{className:"ml-3 px-2 py-0.5 bg-purple-100 text-purple-800 rounded-full text-xs",children:"Express"})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"flex items-center",children:[t.image_url&&t.image_url.length>0?e.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gray-100",children:e.jsx(M,{src:t.image_url[0],alt:t.item_name,className:"w-full h-full object-cover",width:"48",height:"48"})}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(P,{className:"w-6 h-6 text-gray-400"})}),t.image_url&&t.image_url.length>1&&e.jsxs("div",{className:"ml-2 text-xs text-gray-500",children:["+",t.image_url.length-1," more"]})]}),t.status==="quoted"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"w-4 h-4 text-green-600 mr-1"}),e.jsxs("span",{className:"font-bold text-green-700",children:["â‚¬",(t.admin_price||t.suggested_price||0).toFixed(2)]})]})]})]}),t.status==="quoted"&&e.jsxs("div",{className:"px-5 py-3 bg-blue-50 border-t border-blue-100 flex justify-between items-center hover:bg-blue-100 transition-colors duration-200",children:[e.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"View Quote Details"}),e.jsx(H,{className:"w-4 h-4 text-blue-600"})]})]})},te=()=>{const t=j(),{user:i}=T(),[m,x]=o.useState([]),[h,u]=o.useState(!0),[a,w]=o.useState(""),[n,y]=o.useState({status:"all",dateRange:"all"}),[g,N]=o.useState(!1);o.useEffect(()=>{i&&v()},[i]);const v=async()=>{try{const{data:s,error:r}=await A.from("custom_price_quotes").select("*").eq("user_id",i==null?void 0:i.id).order("created_at",{ascending:!1});if(r)throw r;x(s||[])}catch(s){console.error("Error fetching quotes:",s)}finally{u(!1)}},C=s=>{const r=s.item_name.toLowerCase().includes(a.toLowerCase())||s.description.toLowerCase().includes(a.toLowerCase())||s.order_number&&s.order_number.toLowerCase().includes(a.toLowerCase()),k=n.status==="all"||s.status===n.status;let d=!0;const p=new Date(s.created_at),c=new Date;switch(n.dateRange){case"today":d=p.toDateString()===c.toDateString();break;case"week":const L=new Date(c.setDate(c.getDate()-7));d=p>=L;break;case"month":const D=new Date(c.setMonth(c.getMonth()-1));d=p>=D;break}return r&&k&&d},b=m.filter(C);return e.jsx(R,{activeTab:"quotes",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx(l.h2,{className:"text-2xl font-bold text-gray-900",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:"Custom Price Quotes"}),e.jsxs(l.button,{onClick:()=>t("/order/custom-quote"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-xl shadow-md hover:shadow-lg transition-all duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(f,{className:"w-5 h-5 mr-2"}),"Request New Quote"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:a,onChange:s=>w(s.target.value),placeholder:"Search quotes...",className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 shadow-sm"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex space-x-2",children:["all","pending","quoted","accepted","declined"].map(s=>e.jsx(l.button,{onClick:()=>y(r=>({...r,status:s})),className:`px-3 py-1.5 rounded-lg text-sm font-medium capitalize transition-colors ${n.status===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:s==="all"?"All":s},s))}),e.jsxs(l.button,{onClick:()=>N(!g),className:"flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),g?"Hide Filters":"More Filters"]})]}),e.jsx(Q,{children:g&&e.jsx(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","today","week","month"].map(s=>e.jsx(l.button,{onClick:()=>y(r=>({...r,dateRange:s})),className:`px-3 py-1.5 rounded-lg text-sm font-medium capitalize ${n.dateRange===s?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:s==="all"?"All Time":s==="week"?"Last 7 Days":s==="month"?"Last 30 Days":"Today"},s))})]})})})]}),h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading quotes..."})]}):b.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-md",children:[e.jsx(f,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Quotes Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:a||n.status!=="all"||n.dateRange!=="all"?"Try adjusting your filters":"Request a quote for your special items"}),e.jsxs(l.button,{onClick:()=>t("/order/custom-quote"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg inline-flex items-center",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Request Your First Quote"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map(s=>e.jsx($,{quote:s},s.id))})]})})};export{te as default};
