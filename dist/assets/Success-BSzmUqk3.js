import{u as f,d as b,n as g,e as j,f as N,r as l,j as e,i as w,m as a}from"./index-BsN2_pnW.js";import{c as v}from"./stripe-service-Dxjc6CUH.js";import{C as D}from"./check-circle-2-DAVociYa.js";import{A as k}from"./arrow-right-CJwG2D7Q.js";const O=()=>{const s=f(),i=b(),[c]=g(),{user:d}=j(),{clearCart:o}=N(),[p,n]=l.useState(!0),[m,u]=l.useState(null),[r,x]=l.useState(null);return l.useEffect(()=>{var h;if(!d){s("/login");return}if((h=i.state)!=null&&h.orderNumber){x({orderNumber:i.state.orderNumber,totalAmount:i.state.totalAmount,estimatedDelivery:i.state.estimatedDelivery}),n(!1),o();return}const y=c.get("payment_intent");if(!y){u("No payment information found"),n(!1);return}(async()=>{try{n(!0);const t=await v(y);if(t.status!=="succeeded")throw new Error("Payment was not successful");x({orderNumber:t.orderDetails.orderNumber||"N/A",totalAmount:t.orderDetails.totalAmount,estimatedDelivery:t.orderDetails.estimatedDelivery}),o()}catch(t){console.error("Error fetching order details:",t),u(t instanceof Error?t.message:"Failed to fetch order details")}finally{n(!1)}})()},[d,i.state,c,s,o]),p?e.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Processing your order..."})]})}):m?e.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-50 to-white",children:e.jsx("div",{className:"max-w-3xl mx-auto text-center",children:e.jsxs("div",{className:"bg-red-50 rounded-xl p-6 border border-red-100",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4",children:e.jsx(w,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-red-700 mb-2",children:"Payment Verification Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:m}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your payment may have been processed, but we couldn't verify it. Please check your email for confirmation or contact our support team."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsx("button",{onClick:()=>s("/account/orders"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Check Your Orders"}),e.jsx("button",{onClick:()=>s("/support"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg",children:"Contact Support"})]})]})})}):e.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs(a.div,{className:"text-center mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100 mb-6",children:e.jsx(D,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Payment Successful!"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Thank you for your order. Your payment has been processed successfully."})]}),r&&e.jsxs(a.div,{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Summary"}),e.jsxs("div",{className:"space-y-4",children:[r.orderNumber&&e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Order Number"}),e.jsx("span",{className:"font-medium text-gray-900",children:r.orderNumber})]}),r.totalAmount!==void 0&&e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["€",r.totalAmount.toFixed(2)]})]}),r.estimatedDelivery&&e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsx("span",{className:"text-gray-600",children:"Estimated Delivery"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(r.estimatedDelivery).toLocaleDateString()})]})]})]}),e.jsxs(a.div,{className:"bg-blue-50 rounded-2xl p-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"What's Next?"}),e.jsxs("div",{className:"space-y-3 text-gray-600",children:[e.jsx("p",{children:"• You'll receive a confirmation email with your order details"}),e.jsx("p",{children:"• We'll notify you when your order is ready"}),e.jsx("p",{children:"• You can track your order status in your account"}),e.jsx("p",{children:"• Get updates on delivery progress"})]})]}),e.jsxs(a.div,{className:"flex flex-col sm:flex-row items-center justify-center gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[e.jsxs(a.button,{onClick:()=>s("/account/orders"),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 text-white rounded-xl font-medium shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center",whileHover:{scale:1.05},whileTap:{scale:.95},children:["View Order Status",e.jsx(k,{className:"w-5 h-5 ml-2"})]}),e.jsx(a.button,{onClick:()=>s("/"),className:"w-full sm:w-auto px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Back to Home"})]})]})})};export{O as default};
